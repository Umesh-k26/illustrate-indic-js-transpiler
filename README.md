## An illustration: Generate AST and demo compiler/transpiler using custom keywords from lipi (eg: Indic) or text of our own choice

The idea here is to show how we can generate JS parser / AST's or create Transpiler/Compilers for our own set of custom keywords chosen from our own lipi (indic - Hindi/Kan/Telugu etc..). Here we extend the JavaScript grammar with our own lexfile for a lipi's/texts/keywords of our choice. The grammar shipped here covers the whole JS grammar (jscore.jison). The current shipped code generates the **AST (Abstract Syntax Tree)**. However the **AST** generation is only for few constructs (blocks, variable, const, function expression, if, iteration, continue break, return). If you which then you could extend the same for other constructs as well.


(A) Why Jison ?
--------------------
- Better code maintenance since the parser is generated by the Jison Library
- Better performance
- Time to generate the parser is quick (Since its generated by Jison library).

**Reference:**

- [JS parser generator](https://github.com/zaach/jison)
- [Well known JS Libraries to generate JS based Parsers based on the grammar](https://tomassetti.me/parsing-in-javascript/)
- [TypeScript based Parser](https://github.com/basarat/demo-compiler)
- [AST Explorer](https://astexplorer.net/)
- [Vedic/Sanskrit JS based programming language](https://vedic-lang.github.io/)
- [OMLang](https://omlang.com/)


(B) Installation
------------------
Jison can be installed for [Node](http://nodejs.org) using [`npm`](http://github.com/isaacs/npm/)

Using npm:
npm install jison -g

(C) JS Transpile based on our own lipi/text/keywords
-----------------------
 **1. Clone the github repository for examples**
```
a) git clone https://github.com/Umesh-k26/indic-js-transpiler.git
b) cd indic-js-transpiler
```
**2. Transpile Steps:**
If you wish to include your on set of JS keywords for lipi of your choice. Then under src/languages folder create a new file by coping the content from say hindi.js. Replace the keywords with your own custom keywords of the choosen lipi. Also name the new file reflecting the lipi or the language.
```
node index.js -f <input file> -l <language>
Eg: node index.js -f sample.js -l hindi
```
**The output of the above command would generate a regular JS file (output_sample.js)**

**Command Usage:**
> -f : input file name <br/>
> -o : output file name <br/>
> -l : language <br/>
> -a : to print/generate ast<br/>

(D) Generate AST
-----------------------
 Generate AST for the (sample) javascript. ***Refer:*** src/examples/ for the sample lex files (*.l).
```
node index.js -f <input file> -l <language> -a
eg: node index.js -f sample.js -l hindi -a
```
**The output of the above command would generate Abstract Syntax Tree (AST). Like below**

> **[["varStmt",[{"identifier":"j","value":1}]],["varStmt",[{"identifier":"i","value":0}]],["iterStmt",{"type":"for_var","init":[{"identifier":"i","value":1}],"update":[{"type":"relational_exp","left":"i","right":20,"operator":"<"}],"test":[{"type":"post_fix_exp","left":"i","right":null,"operator":"++"}],"body":["blockStmt",[[
"exprStmt",[{"type":"call_exp","left":"वद्","right":["arguments",[{"type":"logical_exp","left":2,"right":2,"operator":"+"}]],"operator":null}]],["varStmt",[{"identifier":"j","value":0}]],["exprStmt",[{"type":"call_exp","left":"वद्","right":["arguments",["j"]],"operator":null}]]]]}]]**

(E) Generate Parser (JavaScript)
-----------------------------------
 Generate Parser for the javascript (sample.js). ***Refer:*** src/lexer-examples/ for the sample lex files (*.l).
```
Usage: jison [file] [lexfile] [options]

file        file containing a grammar
lexfile     file containing a lexical grammar

eg: jison src/jscore.jison src/lexer-examples/hindi_js.l -o build/parser.js
```